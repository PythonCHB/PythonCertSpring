\documentclass{beamer}
%\usepackage[latin1]{inputenc}
\usetheme{Warsaw}
\title[Python Certificate: System Development]{System Development with Python: Week 9}
\author{Christopher Barker}
\institute{UW Continuing Education}
\date{May 21, 2013}

\usepackage{listings}
\usepackage{hyperref}

\begin{document}

% ---------------------------------------------
\begin{frame}
  \titlepage
\end{frame}

% ---------------------------------------------
\begin{frame}
\frametitle{Table of Contents}
%\tableofcontents[currentsection]
  \tableofcontents
\end{frame}


% ---------------------------------------------
\begin{frame}[fragile]{Side Note:}

{\LARGE Python Module of the Week}

\vfill
{\Large \url{http://pymotw.com/} }

\vfill
{\Large Nice summaries and examples of standard library modules}


\end{frame} 


\section{Introduction}

% ---------------------------------------------
\begin{frame}[fragile]{Desktop GUIs: wxPython}

{\Large Desktop GUIs}

\vfill
{\large Traditional Graphical User Interface Applications}

\vfill
{\large Run entirely on machine -- interative, interface and logic code in one process}

\vfill

{\large Advantages:}
\begin{itemize}
   \item Easier to write -- all in one program
   \item Faster -- data/interface direct communication
   \item Faster display: direct to screen (or even OpenGL, etc.)
   \item Runs without network
   \item Save/Manipulate local files
   \item Familiar install/start/stop/run, etc. 
\end{itemize}


\end{frame} 



\begin{frame}[fragile]{Python Options}



{\Large Multiple GUI frameworks available:}

\begin{itemize}
  \item PyGTK
  \item PYQT / PySide
  \item TkInter
  \item wxPython
  \item PyGame
  \item Native GUIs: Cocoa (PyObject), PythonWin
  \item Some more minor ones...
\end{itemize}

\end{frame}

\section{wxPython}

\begin{frame}[fragile]{wxPython}

{\Large Why wxPython?}

\begin{itemize}
  \item Python wrapper around C++ toolkit (wxWidget)
  \item wxWidgets is a wrapper around \emph{native} toolkit:
  \begin{itemize}
    \item Windows: Win32 (64)
    \item OS-X: Cocoa
    \item Linux: GTK
  \end{itemize}
  \item Native look and feel
  \item License: (modified) LGPL
\end{itemize}

\vfill
{\Large Legacy: it was the best option for me when I first needed something...}\\
See http://www.wxpython.org for more information

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Installing}

{\Large wxPython is a big complicated build:\\
        can't do \verb`pip` or \verb`easy_install`}

\vfill
{\Large Windows or OS-X:\\
use the binaries on \url{http://wxpython.org/download.php}}

\vfill
{\Large Linux: use your system's package}

{\large NOTE: there are some issues with some packages:}
\begin{itemize}
    \item May be old version
    \item May use standard wx build -- more crash prone!\\ 
          (some run-time checking turned off)
\end{itemize}


\end{frame}

%-------------------------------
\begin{frame}[fragile]{Versions}

\vfill
{\Large ``Stable'' version: 2.8.12.1}\\
{\large (``stable'' means stable API, not less likely to crash)}

\vfill
{\Large ``Development'' version: 2.9.4.0}\\
{\large (Under active development, API may change (but not much)}

\vfill
{\Large wx project very slow to do official releases -- You probably want to use the development version: it's getting more attention}

\vfill
{\Large ``Phoenix'': next generation version: new bindings, Py3 support, etc.}\\
{\large -- Still experimental}\\
\url{http://wiki.wxpython.org/ProjectPhoenix}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Documentation}

\vfill
{\Large ``Docs and Demos'': download these!}\\

\vfill
{\Large ``wxPython Demo'' -- run this!}\\
{\large Examples of every Widget available}

\vfill
{\Large Primary wx docs:}\\
{\large Written for C++, with Python notes...}\\
\url{http://wxpython.org/onlinedocs.php}\\
This may help: \url{http://wiki.wxpython.org/C%2B%2BGuideForwxPythoneers}

\vfill
{\large Semi-experimental Sphinx docs:}\\
\url{http://xoomer.virgilio.it/infinity77/wxPython/}

\vfill
{\Large The wxPython wiki: lots of good stuff here}
\url{http://wiki.wxpython.org/}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Some starting points}


\vfill
{\Large How to learn wxPython}
\url{http://wiki.wxpython.org/How%20to%20Learn%20wxPython}

\vfill
{\Large wxPython Style Guide}
\url{http://wiki.wxpython.org/wxPython%20Style%20Guide}

\vfill
{\Large The wxpython-users mailing list is a great resource (and great community):}\\
\url{https://groups.google.com/forum/?fromgroups#!forum/wxpython-users}

\vfill
{\large My own repository of samples:}
\url{https://github.com/PythonCHB/wxPythonDemos}

\end{frame}


\section{Basic Structure}

%-------------------------------
\begin{frame}[fragile]{Event-Driven programming}

\vfill
{\large On app startup, the .MainLoop() method is called.}

\vfill
{\large The mainloop takes control -- monitoring for events, then dispatching them}

\vfill
{\large Events can come from the system, or user interaction: keyboard, mouse, etc.}

\vfill
{\large All the work of your app is done in response to events}

\vfill
{\large You only need to response to (Bind) the events you care about}

\vfill
{\large Not so different than a web app, except events are finer-grained}\\
(every mouse move, etc.)


\end{frame}


%-------------------------------
\begin{frame}[fragile]{wx.Window}

\vfill
{\Large Pretty much everything you see on the screen is a \verb`wx.Window`}

\vfill
{\Large It is the superclass for all the ``widgets'', ``controls'', or whatever you want to call them}

\vfill
{\Large It is essentially a rectangle on the screen that catches events}

\vfill
{\Large You generally don't use it by iteself, though you may derive from it to make a new widget}

\vfill
{\large(Historical Note: wxWidgets was called wxWindows -- until Microsoft threatened to sue them.)}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{wx.Window}

\vfill
{\Large Since everything is a \verb`wx.Window`, it's good to know it's methods and signature:}
\begin{verbatim}
def __init__(parent,
             id=-1,
             pos=wx.DefaultPosition,
             size=wx.DefaultSize,
             style=0,
             name=wx.PanelNameStr)
parent (wx.Window)
id (int)
pos (wx.Point)
size (wx.Size)
style (long)
name (string)
\end{verbatim}

\vfill
\url{http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.Window.html}

\end{frame}



%-------------------------------
\begin{frame}[fragile]{wx.Window}

\vfill
{\Large Methods types:}
\begin{itemize}
  \item Appearance: Colors, Fonts, Labels, Styles
  \item Geometry: Size, Position, IsShown, Move, etc 
  \item Layout: Sizers, etc.
  \item Many others!
\end{itemize}

\vfill
\url{http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.Window.html}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Event-Driven programming}

\vfill
{\Large On app startup, the .MainLoop() method is called.}

\vfill
{\Large The mainloop takes control -- monitoring for events, then dispatching them}

\vfill
{\Large Events can come from the system, or user interaction: keyboard, mouse, etc.}

\vfill
{\Large All the work of your app is done in response to events}

\vfill
{\Large You only need to response to (Bind) the events you care about}

\vfill
{\Large Not so different than a web app, except events are finer-grained}\\
(every mouse move, etc.)


\end{frame}


%-------------------------------
\begin{frame}[fragile]{wx.App}

\vfill
{\Large Every wx app has a single wx.App instance:}

\begin{verbatim}
app = wx.App(False)
frame = DemoFrame(None, title="Micro App")
frame.Show()
app.MainLoop()
\end{verbatim}

(the \verb`False` means: ``don't re-direct stdout to a Window'')

And you almost always start the `MainLoop`

\end{frame}

%-------------------------------
\begin{frame}[fragile]{wx.Frame}

\vfill
{\Large \verb`wx.Frame` is a ``top level'' Window: One with a title bar, min-max buttons,etc.}

\vfill
{\Large Most apps have a single \verb`wx.Frame` -- central interaction with the app.} 

\vfill
{\Large This is where menu bars, etc are placed, and often the core GUI logic of app.} 


\begin{verbatim}
class TestFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        kwargs.setdefault('title', "Simple test App")
        wx.Frame.__init__(self, *args, **kwargs)
\end{verbatim}


\vfill
demo: \verb`code\basic_app_1.py`

\end{frame}


%-------------------------------
\begin{frame}[fragile]{Menus}

\vfill
{\Large A \verb`wx.Frame` has a menu bar you can add items to:}

\begin{verbatim}
    # create the menu bar object
    menuBar = wx.MenuBar()
        
    # add a menu to it
    fileMenu = wx.Menu()

    # add an item to the menu
    openMenuItem = fileMenu.Append(wx.ID_ANY, "&Open", "Open a file" )
    #bind a handler to the menu event
    self.Bind(wx.EVT_MENU, self.onOpen, openMenuItem)

    self.SetMenuBar(menuBar)
\end{verbatim}
        
\vfill
demo: \verb`code\basic_app_2.py`

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Event Handlers}

\vfill
{\Large Event handlers have a common signature:}

\vfill
\begin{verbatim}
    def onOpen(self, evt=None):
        print "open menu selected"
        self.app_logic.file_open()
\end{verbatim}

\vfill
{\large The second parameter is the \verb`wx.Event` object that initiated the call -- it holds information about the event that can be useful}

\vfill
{\large I like to give the event parameter a default None, so the handler can be called from other parts of the code as well.}
        
\vfill
demo: \verb`code\basic_app_2.py`

\end{frame}



%-------------------------------
\begin{frame}[fragile]{Common Dialogs}

\vfill
{\Large wxPython provides a number of common Dialogs. These wrap the native ones where possible for a native look and feel.}

\begin{itemize}
 \item \verb`wx.MessageDialog`
 \item \verb`wx.ColourDialog`
 \item \verb`wx.FileDialog`
 \item \verb`wx.PageSetupDialog`
 \item \verb`wx.FontDialog`
 \item \verb`wx.DirDialog`
 \item \verb`wx.SingleChoiceDialog`
 \item \verb`wx.TextEntryDialog`
 \item ...
\end{itemize}

\vfill
{\Large These do pretty much what you'd expect...}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{wx.FileDialog}

\vfill
{\Large Example use of a common dialog: \verb`wx.FileDialog`}\\

\begin{verbatim}
some code here
\end{verbatim}

\vfill
example: \verb`code/basic_app_3.py`
\end{frame}

%-------------------------------
\begin{frame}[fragile]{Basic Widgets}

\vfill
{\Large All the basic widgets (controls) you'd expect are there:}

\begin{itemize}
 \item Buttons
 \item TextCtrl (Text Control)
 \item Check Boxes
 \item List Box
 \item Combo Box
 \item Slider
 \item Spin Control
 \item ....
\end{itemize}

\vfill
{\Large Way too many to list here!}

\vfill
{\Large See the docs and the Demo to find the one you need}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Using a Control}

{\Large A Button about as simple as it gets}

\vfill
{\verb`__init__(parent, id=-1, label="", pos=wx.DefaultPosition, ...)` }

\vfill
{\Large Mostly the same as wx.Window, and other controls....}

\begin{verbatim}
## add just a single button:
self.theButton = wx.Button(self, label="Push Me")
self.theButton.Bind(wx.EVT_BUTTON, self.onButton)
 
## and give it an event handler                                  
def onButton(self, evt=None):
    print "You pushed the button!"
\end{verbatim}

\vfill
code: \verb`code\basic_app_4.py`
\end{frame}

%-------------------------------
\begin{frame}[fragile]{wx.Panel}

{\Large A \verb`wx.Panel` is a \verb`wx.Window` that you can put other controls on}

\vfill
{\Large It supplies nifty things like tab traversal, etc.}

\vfill
{\Large You \emph{can} put controls right on a \verb`wx.Frame` (we just did it), but a wx.Panel provided extra features, the ``normal'' look, and helps you organize and re-use your code}

\vfill
{\Large Mostly the same as wx.Window, and other controls....}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{wx.Panel}

\begin{verbatim}
class ButtonPanel(wx.Panel):
    def __init__(self, *args, **kwargs):
        wx.Panel.__init__(self, *args, **kwargs)

        ## add just a single button:
        self.theButton = wx.Button(self, label="Push Me")
        self.theButton.Bind(wx.EVT_BUTTON, self.onButton)
                                   
    def onButton(self, evt=None):
        print "You pushed the button!"
\end{verbatim}
And use it in the Frame:
\begin{verbatim}
        # put the Panel on the frame
        self.buttonPanel = ButtonPanel(self)
\end{verbatim}

\vfill
code: \verb`code\basic_app_5.py`
\end{frame}

%-------------------------------
\begin{frame}[fragile]{Control Layout}

{\Large With more than one control, you need to figure out how to place them 
and how big to make them}

\vfill
{\Large You may have noticed that \verb`wx.Window` takes \verb`pos` and \verb`size` parameters}

\vfill
{\Large You may have also noticed that I didn't use them.}

\vfill
{\Large Why not?}

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Long Running Tasks}

\vfill
{\Large The UI is locked up while an event is being handled}

\vfill
{\Large So you want all event handlers to run fast.}

\vfill
{\Large But what if there is significant work to do?}

\vfill
{\Large Enter: threading and multi-processing}

\vfill
{\Large But: wxPython is not thread-safe: almost all wx methods must be called from within the same thread.}

\vfill
{\Large Thread-safe operations: Creating and Posting Events}


\end{frame}

%-------------------------------
\begin{frame}[fragile]{CallAfter}

\vfill
{\Large Easiest way to communicate with threads:\\
 \verb`wx.CallAfter`}

\vfill
{\Large Puts an event on the event stack, calls the designated function or method when the stack is cleared:}

\begin{verbatim}
wx.CallAfter(function_to_call, *args, **kwargs)

# *args, **kwargs are passed on to FunctionToCall
\end{verbatim}

{\large (see also: \verb`wx.CallLater()`) }

\vfill
\url{http://wiki.wxpython.org/LongRunningTasks}

\end{frame}




%-------------------------------
\begin{frame}[fragile]{BILS}

\vfill
{\Large {\bf B}rowser {\bf I}nterface, {\bf L}ocal {\bf S}erver}
\vfill

\vfill
{\Large Web app: Server runs on local machine}
\vfill

\vfill
{\Large Browser is the interface -- but all running local}

\vfill
{\Large Can wrap the Browser window in a desktop app: Chrome Embedded Framework, wxWebkit, etc.}

\vfill
{\Large Good way to get both a web app and desktop app with one codebase}

\vfill
{\Large Example: Cameo Chemicals}

\end{frame}


%-------------------------------
\begin{frame}[fragile]{Wrap up}

\vfill
{\Large }
\vfill

\end{frame}

%-------------------------------
\begin{frame}{Next Week:}

\vfill
{\LARGE Student Project Presentations}

\vfill

\end{frame}

%-------------------------------
\begin{frame}[fragile]{Project Time!}

\vfill
\Large{Final wrap up}

\vfill
\Large{Put it together}

\vfill
\Large{Get ready to present}

\vfill
\Large{Presentation: focus on code!}

\end{frame}

\end{document}

 
